# CloudCompare 标量场选区与赋值工具使用说明

本工具允许用户通过交互式选区（矩形或多边形）快速查看选定区域的标量场数值，并分配新的标量值。

## 如何使用

### 1. 启动工具
- 在 DB 树中选中一个或多个**点云**。
- 点击主菜单：**Edit > Scalar fields > SF Selection Tool**。
- 此时会弹出悬浮的分割工具栏，并默认进入**矩形选区**模式。

### 2. 进行选区
- **矩形模式（默认）**：在 3D 视图中点击并拖动鼠标左键画出矩形框。松开鼠标后选区即完成。
- **多边形模式**：点击工具栏上的多边形图标，在 3D 视图中连续点击左键画出多边形。
    - *优化*：现在您可以直接点击标量赋值按钮，系统会自动为您闭合多边形，无需手动右键闭合。

### 3. 打开赋值对话框
- 点击选区工具栏上新增的 **SF** 图标（或按下快捷键 **'S'**）。
- 弹出的“Scalar Field Assignment”对话框将显示：
    - **标量场选择**：当前点云包含的所有标量场。
    - **当前数值列表**：选定区域内已存在的唯一标量值。
    - **赋值输入框**：您可以输入要分配的新整数值（例如类别编号）。

### 4. 执行赋值
- 在数值列表中双击某个数值可以快速填充到输入框。
- 点击 **Apply** 按钮，系统会将新值分配给选定区域内的所有点。
- 此时 3D 视图中的点云颜色会根据标量场的变化实时更新（请确保当前视图正在显示该标量场）。

## 故障排除

### 报错："Define and/or close the segmentation polygon first!"
- **原因**：您在还没有在 3D 视图中画出任何选区的情况下点击了 SF 按钮。
- **解决方法**：请先在屏幕上拖动鼠标画出一个矩形或多边形框，然后再点击 SF 按钮。

## 技巧与建议
- **快捷键**：使用 **'S'** 键可以快速呼出赋值窗口，极大地提高连续操作的效率。
- **多点云操作**：如果同时选中了多个点云，赋值操作将同时作用于这些点云的同名标量场。
